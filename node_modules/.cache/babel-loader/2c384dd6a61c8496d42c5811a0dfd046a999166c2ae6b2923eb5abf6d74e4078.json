{"ast":null,"code":"import { get } from \"lodash\"; // Lodash's get function for safely accessing object properties\n\nconst prepareData = filterParams => {\n  const {\n    year,\n    customerName\n  } = filterParams;\n  return (missions = []) => {\n    // return missions.reduce((acc, mission) => {\n    const filteredMissions = missions.reduce((acc, mission) => {\n      const payloads = get(mission, \"rocket.second_stage.payloads\", []);\n      if (mission.launch_year === `${year}` && payloads.length > 0) {\n        const isCustomerMatch = payloads.find(payload => payload.customers.find(customer => customer.includes(customerName)));\n        if (isCustomerMatch) {\n          acc.push({\n            flight_number: mission.flight_number,\n            mission_name: mission.mission_name,\n            launch_date_utc: mission.launch_date_utc,\n            payload_count: payloads.length\n          });\n        }\n      }\n      console.log(\"accumulated\", acc);\n      return acc;\n    }, []);\n    filteredMissions.sort((a, b) => {\n      // Sort by payload_count (descending) and then by launch_date_utc (descending)\n      const payloadCountDiff = b.payload_count - a.payload_count;\n      if (payloadCountDiff !== 0) {\n        return payloadCountDiff;\n      }\n      return new Date(b.launch_date_utc) - new Date(a.launch_date_utc);\n    });\n    console.log(\"filter\", filteredMissions);\n    return filteredMissions; // Add return statement here to return filteredMissions\n  };\n};\nexport default prepareData;","map":{"version":3,"names":["get","prepareData","filterParams","year","customerName","missions","filteredMissions","reduce","acc","mission","payloads","launch_year","length","isCustomerMatch","find","payload","customers","customer","includes","push","flight_number","mission_name","launch_date_utc","payload_count","console","log","sort","a","b","payloadCountDiff","Date"],"sources":["D:/Fe-hometask/react-missions/src/utils/prepareData.js"],"sourcesContent":["import { get } from \"lodash\"; // Lodash's get function for safely accessing object properties\r\n\r\nconst prepareData = (filterParams) => {\r\n  const { year, customerName } = filterParams;\r\n\r\n  return (missions = []) => {\r\n    // return missions.reduce((acc, mission) => {\r\n    const filteredMissions = missions.reduce((acc, mission) => {\r\n      const payloads = get(mission, \"rocket.second_stage.payloads\", []);\r\n\r\n      if (mission.launch_year === `${year}` && payloads.length > 0) {\r\n        const isCustomerMatch = payloads.find((payload) =>\r\n          payload.customers.find((customer) => customer.includes(customerName))\r\n        );\r\n\r\n        if (isCustomerMatch) {\r\n          acc.push({\r\n            flight_number: mission.flight_number,\r\n            mission_name: mission.mission_name,\r\n            launch_date_utc: mission.launch_date_utc,\r\n            payload_count: payloads.length,\r\n          });\r\n        }\r\n      }\r\n      console.log(\"accumulated\", acc);\r\n      return acc;\r\n    }, []);\r\n    filteredMissions.sort((a, b) => {\r\n      // Sort by payload_count (descending) and then by launch_date_utc (descending)\r\n      const payloadCountDiff = b.payload_count - a.payload_count;\r\n      if (payloadCountDiff !== 0) {\r\n        return payloadCountDiff;\r\n      }\r\n      return new Date(b.launch_date_utc) - new Date(a.launch_date_utc);\r\n    });\r\n    console.log(\"filter\", filteredMissions);\r\n    return filteredMissions; // Add return statement here to return filteredMissions\r\n  };\r\n};\r\n\r\nexport default prepareData;\r\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,QAAQ,CAAC,CAAC;;AAE9B,MAAMC,WAAW,GAAIC,YAAY,IAAK;EACpC,MAAM;IAAEC,IAAI;IAAEC;EAAa,CAAC,GAAGF,YAAY;EAE3C,OAAO,CAACG,QAAQ,GAAG,EAAE,KAAK;IACxB;IACA,MAAMC,gBAAgB,GAAGD,QAAQ,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,OAAO,KAAK;MACzD,MAAMC,QAAQ,GAAGV,GAAG,CAACS,OAAO,EAAE,8BAA8B,EAAE,EAAE,CAAC;MAEjE,IAAIA,OAAO,CAACE,WAAW,KAAK,GAAGR,IAAI,EAAE,IAAIO,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;QAC5D,MAAMC,eAAe,GAAGH,QAAQ,CAACI,IAAI,CAAEC,OAAO,IAC5CA,OAAO,CAACC,SAAS,CAACF,IAAI,CAAEG,QAAQ,IAAKA,QAAQ,CAACC,QAAQ,CAACd,YAAY,CAAC,CACtE,CAAC;QAED,IAAIS,eAAe,EAAE;UACnBL,GAAG,CAACW,IAAI,CAAC;YACPC,aAAa,EAAEX,OAAO,CAACW,aAAa;YACpCC,YAAY,EAAEZ,OAAO,CAACY,YAAY;YAClCC,eAAe,EAAEb,OAAO,CAACa,eAAe;YACxCC,aAAa,EAAEb,QAAQ,CAACE;UAC1B,CAAC,CAAC;QACJ;MACF;MACAY,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEjB,GAAG,CAAC;MAC/B,OAAOA,GAAG;IACZ,CAAC,EAAE,EAAE,CAAC;IACNF,gBAAgB,CAACoB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAC9B;MACA,MAAMC,gBAAgB,GAAGD,CAAC,CAACL,aAAa,GAAGI,CAAC,CAACJ,aAAa;MAC1D,IAAIM,gBAAgB,KAAK,CAAC,EAAE;QAC1B,OAAOA,gBAAgB;MACzB;MACA,OAAO,IAAIC,IAAI,CAACF,CAAC,CAACN,eAAe,CAAC,GAAG,IAAIQ,IAAI,CAACH,CAAC,CAACL,eAAe,CAAC;IAClE,CAAC,CAAC;IACFE,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEnB,gBAAgB,CAAC;IACvC,OAAOA,gBAAgB,CAAC,CAAC;EAC3B,CAAC;AACH,CAAC;AAED,eAAeL,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}